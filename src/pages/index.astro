---
import Layout from '../layouts/Layout.astro';
import Card from '../components/Card.astro';
import { drizzle } from "drizzle-orm/d1";
import { todos } from "../db/schema";

const db = drizzle(Astro.locals.runtime.env.DB);
console.log(Astro.locals.runtime.env.DB)
const result = await db.select().from(todos).all();

console.log(result)
console.log('env.DB')
console.log(Astro.locals.runtime.env)

---


<Layout title="TOP PAGE">
  <h1>Todo一覧</h1>
  <ul>
    {result.map((todo) => <li>{todo.name}</li>)}
  </ul>
  <p><a href="/register">Register</a></p>
  <p><a href="/login">Login</a></p>
</Layout>

